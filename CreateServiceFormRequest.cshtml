@model sistemproject.Models.FullCalendarViewModels.PlansViewModel
@{
    ViewBag.Title = "CreateServiceFormRequest";
    Layout = "~/Views/Shared/NewThema/_LayoutTakvim.cshtml";
    var isSelected = false;



}

<link href="~/Content/fileUpload/css/style.css" rel="stylesheet" />
<style>
    .accordion-button:not(.collapsed) {
        background-color: #fff !important;
    }

    .form-check-input {
        margin-top: 0.1rem !important;
    }

    .sc-trash-bin:hover {
        color: var(--thGreen) !important;
        cursor: pointer;
    }
</style>

<div class="d-flex flex-column flex-root" id="deneme">
    <div class="page d-flex flex-row flex-column-fluid">
        <div class="wrapper d-flex flex-column flex-row-fluid" id="kt_wrapper">
            <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
                <div class="post d-flex flex-column-fluid" id="kt_post">
                    <div id="kt_content_container" class="container-xxl">
                        <div class="row mr-1 ml-1 pt-3  " style="background-color:#fff;">
                            <div class="col-lg-1 col-md-6 col-sm-12 text-leftmy-auto pl-4">
                                <img src="/Images/images/cpm/Agenda.png" height="100">
                            </div>
                            <div class="col-lg-11 col-md-12 col-sm-12 my-auto pl-4">
                                <span class="" style="color: var(--thTitle);font-weight:bold;">Servis Formu Oluştur</span> <br>
                                <span class="font11" style="color: var(--thNewText);">Servis formu oluşturmak için lütfen aşağıdaki alanları giriniz.</span>
                            </div>
                        </div>
                        @foreach (var item in Model.CompanyRequestInfo.Take(1))
                        {
                            <div class="row mr-1 ml-1 pt-3  pr-3  pl-3 pb-0" style="background-color:#fff;">
                                <div class="col-12">
                                    <div class="row pt-3">
                                        <div class="col-lg-6 col-md-12">
                                            <div class="row">
                                                <div class="col-lg-12 pr-2 pl-2 pb-3">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;padding-left: 12px!important;"><b>Firma Adı</b>&nbsp;&nbsp;(Firma bilgilerini görmek için ‘bilgi’ ikonu üzerine geliniz.)</span>
                                                    <img src="~/Images/iconsforservcie/icons8-info.png" class="float-lg-right" height="25" />
                                                    <select class="selectpicker font13 selectValidateControl p-0" id="SELECTSERVICEFORMCOMPANYID" data-live-search="true" data-live-search-style="contains" data-show-subtext="true">
                                                        @*<option data-tokens="" selected data-hesapkod="@item.CompanyId" value="@item.CompanyId">@item.CompanyName</option>*@
                                                        @foreach (var t in Model.CompanyInfo)
                                                        {
                                                            <option @(t.HESAPKOD == item.CompanyId ? "selected" : "") data-tokens="" data-hesapkod="@t.HESAPKOD" value="@t.ANAHESAPKOD">@t.UNVAN</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-6 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Sözleşme</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SELECTCONTRACTID">

                                                        @foreach (var l in Model.CompanyContracts2)
                                                        {
                                                            <option value="@l.COMPANYID" data-id="@l.ID">@l.COMPANYCONTRACT</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-6 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Kalan Adam Gün</span> <br />
                                                    <label class="" id="RSERVICEDAY" style="padding-left: 0.6rem; font-weight: 500; color: var(--thText); margin-top: 1.1rem;"></label>
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Destek Şekli</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SELECTSUPPORTTYPEID">
                                                        <option value="03">Yerinde Destek</option>
                                                        <option value="04">Telefon Desteği</option>
                                                        <option value="05">Uzak Ara Bağlantı</option>
                                                        <option value="06">E Mail</option>
                                                        <option value="08">CPM Ofis Çalışması</option>
                                                        <option value="09">CPM İç Toplantı</option>
                                                        @*<option value="03">Yerinde Destek</option>
                                                            <option value="04">Telefon Desteği</option>
                                                            <option value="05">Uzak Ara Bağlantı</option>
                                                            <option value="99">E Mail</option>*@
                                                    </select>
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Bilgi E-Posta Yetkilisi</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2" id="SELECTINFOEMAIL">
                                                        @foreach (var l in Model.CompanyEmailAuthorized2)
                                                        {
                                                            var selected = l.MAILONAY == "1" ? "selected" : "";
                                                            <option value="@l.ID" @selected>@l.YETKILIADSOYAD</option>
                                                        }
                                                    </select>

                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Bilgi E- Posta Adresi</span>
                                                    @if (Model.CompanyEmailAuthorized2.Count() > 0)
                                                    {
                                                        if (Model.CompanyEmailAuthorized2.Where(a => a.MAILONAY == "1").Count() > 0)
                                                        {
                                                            foreach (var bg in Model.CompanyEmailAuthorized2.Where(a => a.MAILONAY == "1"))
                                                            {
                                                                <input value="@bg.EMAIL1" type="email" placeholder="Örn : isim@mail.com" aria-describedby="emailHelp" class="col-12 Input-Medium mt-2" id="SELECTEMAILADDRESS" style="">
                                                                break;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            foreach (var bg in Model.CompanyEmailAuthorized2.Where(a => a.MAILONAY == "0"))
                                                            {
                                                                <input value="" type="email" placeholder="Örn : isim@mail.com" aria-describedby="emailHelp" class="col-12 Input-Medium mt-2" id="SELECTEMAILADDRESS" style="">
                                                                break;
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        <input value="" type="email" placeholder="Örn : isim@mail.com" aria-describedby="emailHelp" class="col-12 Input-Medium mt-2" id="SELECTEMAILADDRESS" style="">
                                                    }
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">İl</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SELECTPROVINCEID">
                                                        @if (ViewBag.ProvinceName != null)
                                                        {
                                                            <option selected value="@ViewBag.ProvinceId">@ViewBag.ProvinceName</option>
                                                        }
                                                        else
                                                        {
                                                            <option selected value="">Seçiniz</option>
                                                        }
                                                        @foreach (var y in Model.ProvinceSelectList)
                                                        {
                                                            if (y.Value != @ViewBag.ProvinceId)
                                                            {
                                                                <option value="@y.Value">@y.Text</option>
                                                            }
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">İlçe</span>
                                                    @if (ViewBag.Districtname != null)
                                                    {
                                                        <input type="text" class="col-12 Input-Medium mt-2 inputValidateControl" id="SELECTDISTRICTID" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;" value="@ViewBag.Districtname">
                                                    }
                                                    else
                                                    {
                                                        <input type="text" class="col-12 Input-Medium mt-2 inputValidateControl" id="SELECTDISTRICTID" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;" value="">
                                                    }
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="ml-1" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 7px!important;">CPM Katılımcıları</span>
                                                    <select name="selValue" class="selectpicker col-12 font13" multiple data-actions-box="true" id="SELECTCPMPERSONID">
                                                        @foreach (var k in Model.CpmPersonInfo)
                                                        {
                                                            <option data-email="@k.EMAIL" value="@k.ID">@k.FULLNAME</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-12 p-2" id="cpmParticipantsDiv" style="display: none;">
                                                    <span class="ml-1" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 7px!important;">CPM Katılımcıları<font style="color: var(--thBlue);"> (Servis formunu diğer "CPM Katılımcıları" için de oluşturmak istediniz,lütfen katılımcı seçiniz !)</font></span>
                                                    <select name="selValue" class="selectpicker col-12 font13" multiple data-actions-box="true" id="CreateToCpmParticipant">
                                                        @foreach (var k in Model.CpmPersonInfo)
                                                        {
                                                            <option data-email="@k.EMAIL" value="@k.ID">@k.FULLNAME</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-12 p-3">
                                                    <input class="form-check-input font18 mr-5" type="checkbox" value="" id="CreateFormToCpmPerson" name="CreateFormToCpmPerson">
                                                    <label class="form-check-label ml-4 font11 fontBold mr-5" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 7px!important;" for="flexCheckDefault">Servis formunu diğer "CPM Katılımcıları" için de oluştur !</label>
                                                </div>
                                                <div class="col-lg-12 p-3">
                                                    <input class="form-check-input font18 mr-5" type="checkbox" value="" id="DontAddMe" name="DontAddMe">
                                                    <label class="form-check-label ml-4 font11 fontBold mr-5" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 7px!important;" for="flexCheckDefault">Servis formunu  benim için oluşturma !</label>
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="ml-1" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 7px!important;">Firma Katılımcıları</span>
                                                    <input type="text" class="col-12 Input-Medium mt-2" id="SELECTCOMPANYPERSONID" placeholder="Yazınız...(Örnek:Ad Soyad, Ad Soyad)" style="padding-top: 7px; padding-bottom: 7px;" value="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-12" style=" border-left: 1px solid var(--thBorderLight) !important;">
                                            <div class="row" style="margin-bottom: 136px !important;">
                                                <div class="col-lg-12 p-2">
                                                    <input disabled class="col-12" id="" value="Proje Durumu (aşaması) burada belirtilecek" style=" font-weight: bold; color: var(--thBlue); border: 2px solid var(--thBlue); background-color: transparent; border-radius: 8px; padding: 1.5rem; font-size: 1.1rem; ">
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Servis Durumu</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SELECTSERVICETYPEID">
                                                        <option value="">Seçiniz</option>
                                                        @foreach (var x in Model.ServiceTypeSelectList)
                                                        {

                                                            <option value="@x.Value">@x.Text</option>
                                                        }
                                                    </select>
                                                </div>

                                                <!--Projeler Başlangıç-->
                                                <div class="col-lg-12 p-2 SelectProject" hidden>
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Projeler</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SelectProject">
                                                        <option value="">Seçiniz</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-12 p-2 SelectProjectSteps" hidden>
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Proje Adımları</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SelectProjectSteps">
                                                        <option value="">Seçiniz</option>
                                                    </select>
                                                </div>
                                                <!--Projeler Bitiş-->
                                                <!--Ana İşlem Başlangıç-->
                                                <!--<div class="col-lg-12 p-2 SelectMainProcess" hidden>
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Ana Grup</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="MainProcess">
                                                        <option value="">Seçiniz</option>
                                                    </select>
                                                </div>-->

                                                <div class="col-lg-12 p-2 SelectMainProcess" hidden>
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Ana Grup</span>
                                                    <select class="selectpicker font13 selectValidateControl p-0" id="MainProcess" data-live-search="true" data-live-search-style="contains" data-show-subtext="true">
                                                        <option value="">Ana Grup Arayınız...</option>

                                                        @foreach (var t in Model.MainProcessList)
                                                        {
                                                            <option value="@t.MainProcess">@t.MainProcess</option>
                                                        }
                                                    </select>
                                                </div>

                                                <div class="col-lg-12 p-2 SelectSubProcess" hidden>
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Alt Grup</span>
                                                    <select class="Dropdown col-lg-12 col-md-12 col-sm-12 mt-2 selectValidateControl" id="SubProcess">
                                                        <option value="">Seçiniz</option>
                                                    </select>
                                                </div>
                                                <!--Ana İşlem Bitiş-->

                                                <div class="col-lg-12 p-2">
                                                    <span class="ml-1" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 7px!important;">İşlem Seçimi</span>
                                                    <select name="selValue" class="selectpicker col-12 font13" multiple data-actions-box="true" id="SelectServiceSelection">
                                                        @foreach (var c in Model.ServiceSelection)
                                                        {
                                                            <option data-id="@c.TIPKOD" value="@c.ID">@c.SERVICESELECTION</option>
                                                        }
                                                    </select>
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                        Başlangıç Zamanı
                                                    </span>
                                                    <input type="datetime-local" class="datetime-local col-12 Input-datetimeLocal mt-2 tarihGetir" id="SELECTSTARTDATE" name="meeting-time">
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                        Bitiş Zamanı
                                                    </span>
                                                    <input type="datetime-local" class="datetime-local col-12 Input-datetimeLocal mt-2 tarihGetir" id="SELECTENDDATE" name="meeting-time">
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <div class="form-check form-check-inline mr-5">
                                                        <span class="mr-5" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Servis Süresi</span>
                                                    </div>
                                                    <div class="form-check form-check-inline mr-5">
                                                        <input class="form-check-input" type="checkbox" id="allDAY" name="allDAY" value="">
                                                        <label class="form-check-label" for="inlineCheckbox1">Tüm Gün</label>
                                                    </div>
                                                    <div class="form-check form-check-inline">
                                                        <input class="form-check-input" type="checkbox" value="" id="manuelSetting" name="manuelSetting">
                                                        <label class="form-check-label" for="inlineCheckbox2">Manuel Giriş</label>
                                                    </div>
                                                    <span class="float-right baseServisSuresi" style="color:var(--thTitle);font-size: 12px !important;padding-left: 10px!important;text-align: right;font-weight: bold;" hidden></span>
                                                    <input type="number" disabled class="col-12 Input-Medium mt-2 inputValidateControl" id="BASESERVICETIME" placeholder="Dakika giriniz(Örn. 30)" style="">
                                                </div>
                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Ücretsiz Servis Süresi</span>
                                                    <span class="float-right toplamUcretsizServisSuresi" style="color:var(--thTitle);font-weight: bold;font-size: 12px !important;padding-left: 10px!important;text-align: right;" hidden></span>
                                                    <input type="number" style="" class="datetime-local col-12 Input-Medium mt-2" id="SELECTMANDAYFREEID" placeholder="Dakika giriniz(Örn. 30)" hidden>
                                                    <input type="number" style="" class="datetime-local col-12 Input-Medium mt-2" id="BASEFREESERVICETIME" placeholder="Dakika giriniz(Örn. 30)">
                                                </div>

                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Hesaplanan Servis Süresi</span>
                                                    <span class="float-right toplamServisSuresi" style="color:var(--thTitle);font-size: 12px !important;padding-left: 10px!important;text-align: right;font-weight: bold;" hidden></span>
                                                    <input style="" class="col-12 Input-Medium mt-2" type="number" id="SELECTMANDAYID" placeholder="0" disabled>
                                                    <span class="float-left toplamServisSuresiInfo" style="color:var(--thRed);font-size: 12px !important;padding-left: 10px!important;text-align: left;font-weight: bold;" hidden></span>
                                                </div>

                                                <div class="col-lg-12 p-2">
                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Hesaplama Katsayısı</span>
                                                    <input style="" class="col-12 Input-Medium mt-2" type="number" id="HESAPKATSAYISI" placeholder="Örn. 3" disabled>
                                                </div>
                                                <div class="col-lg-12 pb-3">
                                                    <label hidden></label> <br />
                                                    <div class="form-check form-check-inline mr-5">
                                                        <input class="form-check-input font18" type="checkbox" value="" id="YAZILIMCICHECK" name="YAZILIMCICHECK">
                                                        <label class="form-check-label" style="color: var(--thNewText);" for="flexCheckDefault">Yazılımcı</label>
                                                    </div>
                                                    <div class="form-check form-check-inline mr-5">
                                                        <input class="form-check-input font18" type="checkbox" value="" id="HAFTASONUCHECK" name="HAFTASONUCHECK">
                                                        <label class="form-check-label" style="color: var(--thNewText);" for="flexCheckDefault">Hafta sonu</label>
                                                    </div>
                                                    <div class="form-check form-check-inline mr-5">
                                                        <input class="form-check-input font18" type="checkbox" value="" id="HAFTAICICHECK" name="HAFTAICICHECK">
                                                        <label class="form-check-label" style="color: var(--thNewText);" for="flexCheckDefault">Hafta içi (Mesai saatleri dışında)</label>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12 pb-3">
                                                    <!--  <label style="color:red;">* Hesaplama yapıldıktan sonra ki değişikler için sayfayı yenilemeniz gerekmektedir.</label> <br />-->
                                                </div>
                                                <div class="col-lg-12 pb-3">
                                                    <span class="float-left selectParticipatorInfo" style="color:var(--thRed);font-size: 12px !important;padding-left: 10px!important;text-align: left;font-weight: bold;" hidden></span><br />
                                                    <span class="float-left checkboxInfo" style="color:var(--thRed);font-size: 12px !important;padding-left: 10px!important;text-align: left;font-weight: bold;" hidden></span><br />
                                                    <span class="float-left checkboxTotalTimeInfo" style="color:var(--thRed);font-size: 12px !important;padding-left: 10px!important;text-align: left;font-weight: bold;" hidden></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mr-1 ml-1" style="background-color:#fff;border-top: 1px solid var(--thBorderLight);">
                                <div class="col-12">
                                    <div class="row">
                                        <div class="col-lg-6 col-md-12">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="row pt-5">
                                                        <div class="col-12 pb-2">
                                                            <div class="row">
                                                                <div class="col-lg-6 col-md-12 my-auto pl-3">
                                                                    <span class="fontBold" style="color:var(--thTitle);font-size: 13px !important;padding-left: 10px!important;"><b>Yapılanlar</b></span>
                                                                </div>
                                                                <div class="col-lg-6 col-md-12 my-auto  text-lg-right text-md-left pr-4">
                                                                    <button id="addRowYapilanlar" type="button" class="Button-Add">Yeni Satır Ekle</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 Scroll-Blue p-3" id="ANACARDYAPILAN" style="height:auto!important;">
                                                            <div class="card p-3 mb-2" id="yapilanlarCard" style="background-color:var(--thBG);border:none!important">
                                                                <div class="mb-3">
                                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                        Talep Eden Kişi
                                                                    </span> <br />
                                                                    <input value="@item.Requester" type="text" style="padding-top: 7px; padding-bottom: 7px;" class="datetime-local  Input-Medium mt-2 inputValidateControl col-10" id="GETREQUESTER" placeholder="Yazınız...">
                                                                    <i class="icon sc-trash-bin p-2 mr-2 float-right Label-Red" id="deleteYapilanlarCard"></i>
                                                                </div>
                                                                <div class="mb-3">
                                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                        Talep Edilen Konu
                                                                    </span>
                                                                    <input value="@item.RequestId nolu @item.Topic" type="text" style="padding-top: 7px; padding-bottom: 7px;" class="datetime-local col-12 Input-Medium mt-2 inputValidateControl" id="GETREQUESTEDSUBJECT" placeholder="Yazınız...">
                                                                </div>
                                                                <span style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                    Yapılan İş Özeti
                                                                </span>
                                                                <div class="form-floating">
                                                                    <textarea class=" form-control inputValidateControl" id="GETWORKDONESUMMARY">@item.RequestId nolu Destek talebi</textarea>
                                                                    <label for="floatingTextarea">İş Özetiniz...</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-12" style=" border-left: 1px solid var(--thBorderLight) !important;">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="row pt-5">
                                                        <div class="col-12 pb-2">
                                                            <div class="row">
                                                                <div class="col-lg-6 col-md-12 my-auto pl-3">
                                                                    <span class="fontBold" style="color:var(--thTitle);font-size: 13px !important;padding-left: 10px!important;"><b>E-Posta Bilgilendirme</b></span>
                                                                </div>
                                                                <div class="col-lg-6 col-md-12 my-auto  text-lg-right text-md-left">
                                                                    <button id="addNewEmail" type="button" class="Button-Add">Yeni E-posta Ekle</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 Scroll-Blue p-3" id="emailAnaCard" style="height:auto;">
                                                            @if (Model.CompanyEmailAuthorized2.Count != 0)
                                                            {
                                                                foreach (var l in Model.CompanyEmailAuthorized2)
                                                                {
                                                                    if (l.YETKILINO == "1")
                                                                    {
                                                                        <div class="card p-2 EmailCards mb-2" style="background-color:var(--thBG);border:none!important;" id="emailCard">
                                                                            <div class="row mb-3">
                                                                                <div class="col-10">
                                                                                    <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                                        Ad-Soyad
                                                                                    </span> <br>
                                                                                    <input value="@l.YETKILIADSOYAD" type="text" class="Input-Medium mt-2 getName col-12" id="GETNAME" placeholder="Yazınız...">
                                                                                </div>
                                                                                <div class="col-1 my-auto">
                                                                                    <input class="form-check-input my-auto" type="radio" name="exampleRadios" id="SendEmailFormPerson">
                                                                                </div>
                                                                                <div class="col-1 my-auto pt-4">
                                                                                    <i class="icon sc-trash-bin Label-Red" id="deleteEmailCard"></i>
                                                                                </div>
                                                                            </div>
                                                                            <div class="mb-3">
                                                                                <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                                    E-Posta
                                                                                </span>
                                                                                <input value="@l.EMAIL1" type="email" class="datetime-local col-12 Input-Medium mt-2 inputValidateControl getmail" id="GETEMAIL" placeholder="Örn : isim@mail.com" aria-describedby="emailHelp">
                                                                            </div>
                                                                        </div>
                                                                    }


                                                                }
                                                            }

                                                            else
                                                            {
                                                                <div class="card p-2 EmailCards mb-2" style="background-color:var(--thBG);border:none!important;" id="emailCard">
                                                                    <div class="row mb-3">
                                                                        <div class="col-10">
                                                                            <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                                Ad-Soyad
                                                                            </span> <br>
                                                                            <input type="text" class="Input-Medium mt-2 getName col-12" id="GETNAME" placeholder="Yazınız...">
                                                                        </div>
                                                                        <div class="col-1 my-auto">
                                                                            <input class="form-check-input my-auto" type="radio" name="exampleRadios" id="SendEmailFormPerson">
                                                                        </div>
                                                                        <div class="col-1 my-auto pt-4">
                                                                            <i class="icon sc-trash-bin Label-Red" id="deleteEmailCard"></i>
                                                                        </div>
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                            E-Posta
                                                                        </span>
                                                                        <input type="email" class="datetime-local col-12 Input-Medium mt-2 inputValidateControl getmail" id="GETEMAIL" placeholder="Örn : isim@mail.com" aria-describedby="emailHelp">
                                                                    </div>
                                                                </div>
                                                            }


                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mr-1 ml-1" style="background-color:#fff;border-top: 1px solid var(--thBorderLight);">
                                <div class="accordion accordion-flush" id="accordionFlushExample">
                                    <div class="accordion-item">
                                        <div class="accordion-header" id="flush-headingOne">
                                            <div class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                                                <div class="row" style="width:inherit;">
                                                    <div class="col-12 text-center">
                                                        <span class="float-left fontBold my-2" style="color: var(--thBlue);font-size:12px;font-weight:bold;">
                                                            Ek Bilgiler
                                                            <span class="text-center font11 ml-5" style="color:var(--thCpmOrange);">(Bu alan zorunlu değildir. Dilerseniz ekleyebilirsiniz.)</span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body" style="background-color:var(--thBG);">
                                                <div class="row">
                                                    <div class="col-lg-6 col-md-12 col-sm-12">
                                                        <div class="row mt-2">
                                                            <div class="col-12 pb-2">
                                                                <div class="row mt-2">
                                                                    <div class="col-12 my-auto pl-3">
                                                                        <span class="txtbold" style="color: var(--thTitle);"><b>Proje veya Servis Aşamasındaki İzlenimler</b></span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card p-3" id="GETIMPRESSIONS" style="background-color:var(--thBG);border:none!important">
                                                                    <div class="mb-3">
                                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                            Kişi Adı-Soyadı
                                                                        </span>
                                                                        <input type="text" style="padding-top: 7px; padding-bottom: 7px;" class="datetime-local  Input-Medium mt-2 col-12" id="IMPFULLNAME" placeholder="Yazınız...">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                            Talep Edilen Konu
                                                                        </span>
                                                                        <input type="text" style="padding-top: 7px; padding-bottom: 7px;" class="datetime-local col-12 Input-Medium mt-2" id="IMPREQUESTEDSUBJECT" placeholder="Yazınız...">
                                                                    </div>
                                                                    <span style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">
                                                                        Konu İçeriği
                                                                    </span>
                                                                    <div class="form-floating">
                                                                        <textarea class="form-control" id="IMPTOPICCONTENT"></textarea>
                                                                        <label for="floatingTextarea">Konu İçeriğiniz...</label>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-12 col-sm-12" style="border-left: 2px solid var(--thNewBlue);">
                                                        <div class="row" id="FileAnaRow" style="">
                                                            <div class="col-12">
                                                                <label style="color:var(--thText);font-size: unset;font-weight:bold;">DOSYA YÜKLE</label> <br />
                                                                <label style="color:var(--thText);">Servis planına eklemek istediğiniz dosyaları yükleyebilirsiniz. </label> <br />
                                                                <form id="upload" enctype="multipart/form-data">
                                                                    <div id="drop">
                                                                        <img src="~/Images/iconsforservcie/icons8-upload_to_cloud.png" height="50" /><br />
                                                                        <label style="font-size: 0.7rem;">Yüklemek istediğiniz dosyaları bu alana sürükleyip bırakınız.</label> <br />
                                                                        <label style="font-size: 0.8rem;">VEYA</label> <br />
                                                                        <a>Dosya Seç</a>
                                                                        <input type="file" id="multipleFile" class="multiple p-2" name="fileUpload" multiple style=" padding: .4rem !important;" />
                                                                    </div>
                                                                    <ul>
                                                                    </ul>
                                                                </form>
                                                                <span style="font-size:0.8rem;">* zip, pdf, doc, docx, xls, xlsx, png, jpeg dosya formatları kabul edilmektedir.</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <div class="accordion-header" id="flush-headingTwo">
                                            <div class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                                                <div class="row" style="width:inherit;">
                                                    <div class="col-lg-12 col-md-12">
                                                        <span style="color: var(--thBlue);font-size:12px;font-weight:bold;">CPM Standardı Oluşturulacak Konu</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
                                            <div class="row mr-2 ml-2 mt-3">
                                                <div class="col-lg-12 col-md-12 p-0">
                                                    <span class="float-left Label-Text">Yeni satır eklemek için sağdaki butona tıklayınız ! </span>
                                                    <button id="addNewRowKonu" type="button" class="Button-Plus float-right sc-plus"></button>
                                                </div>
                                            </div>
                                            <div class="accordion-body">
                                                <div class="row pt-3 pb-3 mb-2" id="NewKonu" style="background-color:var(--thBG);border-radius:6px;">
                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Konu Başlığı</span>
                                                        <input type="text" class="col-12 Input-Medium mt-2" id="GETTOPICTITLE" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;">
                                                    </div>
                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Uygulanacak Modül</span>
                                                        <input type="text" class="col-12 Input-Medium mt-2" id="GETMODULE" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;">
                                                    </div>
                                                    <div class="col-lg-5 col-md-6 col-sm-12">
                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Konu Detayı</span>
                                                        <input type="text" class="col-12 Input-Medium mt-2" id="GETSUBJECTDETAIL" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;">
                                                    </div>
                                                    <div class="col-lg-1 col-md-1 col-sm-12 my-4">
                                                        <i class="icon sc-trash-bin p-2 ml-2 float-right Label-Red" id="deleteKonu"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <div class="accordion-header" id="flush-headingThree">
                                            <div class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
                                                <div class="row" style="width:inherit;">
                                                    <div class="col-lg-12 col-md-12">
                                                        <span style="color: var(--thBlue);font-size:12px;font-weight:bold;">CPM Standardı Oluşturulacak Rapor Ekle</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
                                            <div class="row mr-2 ml-2 mt-3">
                                                <div class="col-lg-12 col-md-12 p-0">
                                                    <span class="float-left Label-Text">Yeni satır eklemek için sağdaki butona tıklayınız ! </span>
                                                    <button id="addNewRowRapor" type="button" class="Button-Plus float-right sc-plus"></button>
                                                </div>
                                            </div>
                                            <div class="accordion-body">
                                                <div class="row pt-3 pb-3 mb-2" id="NewReport" style="background-color:var(--thBG);border-radius:6px;">
                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Rapor Adı</span>
                                                        <input type="text" class="col-12 Input-Medium mt-2" id="GETREPORTNAME" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;">
                                                    </div>
                                                    <div class="col-lg-3 col-md-6 col-sm-12">
                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Uygulanacak Modül</span>
                                                        <input type="text" class="col-12 Input-Medium mt-2" id="GETREPORTMODULE" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;">
                                                    </div>
                                                    <div class="col-lg-5 col-md-6 col-sm-12">
                                                        <span class="" style="color:var(--thTitle);font-size: 12px !important;font-weight: bold;padding-left: 10px!important;">Açıklama</span>
                                                        <input type="text" class="col-12 Input-Medium mt-2" id="GETREPORTDESCRIPTION" placeholder="Yazınız..." style="padding-top: 7px; padding-bottom: 7px;">
                                                    </div>
                                                    <div class="col-lg-1 col-md-1 col-sm-12 my-4">
                                                        <i class="icon sc-trash-bin p-2 ml-2 float-right Label-Red" id="deleteReport"></i>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mr-1 ml-1 p-3 mb-5" style="background-color:#fff;border-top:1px solid var(--thBorderLight);">
                                <div class="col-12 text-right">
                                    <a type="button" class="Button-Outline-Close mr-4 restart text-center pt-2" href="/CpmServisSistemi/Takvim">İptal</a>
                                    <button class="Button-Outline-Kaydet" data-id="@item.RequestId" id="ServiceFormSaveButton">Kaydet</button>
                                </div>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/FloatingTextarea/floatingTextarea.js?v=5"></script>
<script src="~/Scripts/EmailControl/emailControl.js?v=5"></script>
<script src="~/Scripts/ServiceTimeControl/serviceTimeControl.js?v=5"></script>
<script src="~/Scripts/PageScripts/CreateServiceFormRequest.js?v=8"></script>
<script src="~/Content/fileUpload/js/jquery.ui.widget.js?v=5"></script>
<script src="~/Content/fileUpload/js/jquery.iframe-transport.js?v=5"></script>
<script src="~/Content/fileUpload/js/jquery.fileupload.js?v=5"></script>
<script src="~/Content/fileUpload/js/jquery.knob.js?v=5"></script>
<script src="~/Content/fileUpload/js/script.js?v=5"></script>
<script>

    function clearSelections(type) {

        if (type > 0) {
            //Proje Adımlarını Sıfırla
            var SelectProjectSteps = $("#SelectProjectSteps");
            SelectProjectSteps.empty();
            SelectProjectSteps.append('<option value="" selected>Seçiniz</option>');

            if (type > 1) {
                //Projeleri Sıfırla
                var SelectProject = $("#SelectProject");
                SelectProject.empty();
                SelectProject.append('<option value="" selected>Seçiniz</option>');

                if (type > 2) {
                    //Sözleşmeleri Sıfırla
                    var SELECTCONTRACTID = $("#SELECTCONTRACTID");
                    SELECTCONTRACTID.empty();
                    SELECTCONTRACTID.append('<option value="" selected>Seçiniz</option>');
                }
            }
        }
    }

    // #region Sözleşme seçildiğinde Projeleri getir
    try {
        $("body").on("change", "#SELECTCONTRACTID", function () {
            var CompanyId = $("#SELECTCONTRACTID option:selected").val();
            var ContractId = $("#SELECTCONTRACTID option:selected").attr("data-id");
            var SelectProject = $("#SelectProject");
            if (ContractId != "" && ContractId != "Seçiniz") {
                $.ajax({
                    url: '/CpmServisSistemi/GetCompanyContractProjects',
                    type: 'POST',
                    dataType: 'json',
                    data: { 'CompanyId': CompanyId, 'ContractId': ContractId },
                    success: function (data) {
                        clearSelections(2);
                        //SelectProject.append('<option value="" selected>Seçiniz</option>');
                        $.each(data.AllProjects, function (index, option) {
                            SelectProject.append('<option value=' + option.Value + '>' + option.Text + '</option>');
                        });

                    }
                });
            }

        });
    }
    catch (error) {
        console.error(error);
    }
    // #endregion

    // #region Servis Durumu seçildiğinde Proje ve proje adımları dropdownları ya da ana group ve alt group dropdownları göster
    try {
        $("#SELECTSERVICETYPEID").on("change", function () {
            const serviceTypeId = $(this).val();
            const serviceTypeName = $(this).find("option:selected").text();

            if (serviceTypeId === "3" && serviceTypeName === "Proje") {
                $(".SelectMainProcess, .SelectSubProcess").attr("hidden", true);
                $("#SubProcess, #MainProcess").val("");
                $(".SelectProject, .SelectProjectSteps").removeAttr("hidden");
                $("#SelectProjectSteps, #SelectProject").val("");
            }
            else if (serviceTypeId === "2" && serviceTypeName === "Servis") {
                $(".SelectMainProcess, .SelectSubProcess").removeAttr("hidden");
                $("#SubProcess, #MainProcess").val("");
                $(".SelectProject, .SelectProjectSteps").attr("hidden", true);
                $("#SelectProjectSteps, #SelectProject").val("");
                //$.get('GetProcess', null, function (data) {
                //    for (var i = 0; i < data.length; i++) {
                //        $("#MainProcess").append('<option value=' + data[i].MainProcess + '>' + data[i].MainProcess + '</option>');
                //    }
                //}, 'json');
            }
            else {
                $(".SelectProject, .SelectProjectSteps, .SelectMainProcess, .SelectSubProcess").attr("hidden", true);
                $("#SelectProjectSteps, #SelectProject, #SubProcess, #MainProcess").val("");
            }
        });

    } catch (e) {
        console.error(error);
    }
    // #endregion
    // #region Proje seçildiğinde ona ait adımları getir
    try {
        $("body").on("change", "#SelectProject", function () {
            var ProjectId = $("#SelectProject option:selected").val();
            var SelectProjectSteps = $("#SelectProjectSteps");
            if (ProjectId != "" && ProjectId != "Seçiniz") {
                $.ajax({
                    url: '/CpmServisSistemi/GetProjectSteps',
                    type: 'POST',
                    dataType: 'json',
                    data: { 'ProjectId': ProjectId },
                    success: function (data) {
                        clearSelections(1);
                        //SelectProjectSteps.append('<option value="" selected>Seçiniz</option>');
                        $.each(data.ProjectSteps, function (index, option) {
                            SelectProjectSteps.append('<option value=' + option.Value + '>' + option.Text + '</option>');
                        });
                    }
                });
            }
        });
    }
    catch (error) {
        console.error(error);
    }
    // #endregion
    // #region Ana Group seçildiğinde ona ait alt groupları getir
    try {
        $("body").on("change", "#MainProcess", function () {
            var MainProcessId = $("#MainProcess option:selected").val();
            var MainProcess = $("#MainProcess option:selected").text().trim();
            var SubProcess = $("#SubProcess");
            if (MainProcessId != "" && MainProcessId != "Seçiniz") {
                SubProcess.empty();
                SubProcess.append('<option value="" selected>Seçiniz</option>');
                $.get('GetSubProcess', { MainProcess: MainProcess }, function (data) {
                    for (var i = 0; i < data.length; i++) {
                        SubProcess.append('<option value=' + data[i].MainProcess + '>' + data[i].SubProcess + '</option>');
                    }
                }, 'json');
            }
        });
    }
    catch (error) {
        console.error(error);
    }
    // #endregion
</script>
